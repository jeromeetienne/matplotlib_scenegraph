- TODO add an assert 
  - ndc coord must be in [-1,+1]
  - so after computation add the assert for it
- do a function .save_as_obj in geometry_utils
- for lighting - https://chatgpt.com/c/68edfbd0-efb8-8330-b1a2-a6e65f3460ed
  - i can do that per polygon in flat shading
  - can i do lighting on point, line ?
    - a line is lit relative to its center
    - a point is lit relative to its position
    - ambient will be the same on all the same
- make an object `Text`
  - https://chatgpt.com/c/68ed8560-e520-8332-9352-3926389f393b
- put all the sanity check you got in the contructor, put it a function
  - call it at the end of the constructor
  - call it in the renderer
- bug in geometryShape
  - vertices are still reused . it makes `Polygons` to fail
  - `GeometryUtils.expand_vertices(geometry)`
  - make a function to clone the vertices if needed
  - take it from the .obj loader
- FIXME the notion of expanded geometry is unclear. figure it out
- there is a depth sorting inside the object3d sometime
  - and sometime there is a depth sorting at the face level
  - how can they interact ?
  - zorder = distance from the camera... period
- publish event as staticTypeEvent
  - an minimal event system which support static type checking
- do a geometry animation/morphing
  - you give it an object, and a target_geometry
  - it will interpolate the geometry vertices
- do a "capitain blood" flying in the montain
  - https://youtu.be/CeNKepH2ut4?t=224
- make a histogram animated
  - add the axes with the ticks and labels
  - do a 2d figure with lines and bars
  - do a 3d figure with 3d bars
- remove all the ' @ ' for the matrix multiplication
  - use np.matmul or the `@` operator
- find a good API for the various materials
  - Q. do you do a Material class like in three.js ?
- find a good API for the various materials
  - the material can hook on the renderer loop
  - Q. do you do a Material class like in three.js ?
  - copy the one from three.js
  - LineMaterial
  - PointMaterial
  - SpriteMaterial
  - MeshBasicMaterial
  - MeshWireframeMaterial
  - MeshTextureMaterial
  - MeshNormalMaterial
- do you handle point light, directional light
- implement a `.serialization` ? to/from json ?
  - could easily be done
- implement a .depth_sorting = true in renderer
  - where object3d is sorted by their world position and then rendered
  - NOTE: conflict with the delta rendering from the animation loop
    - make an options to remove the delta rendering in the animation loop


## Done
- DONE lines = Lines.from_mesh_geometry(mesh_geometry, dedup_edges=True)
  - the dedup_edges DO NOT WORK
- DONE textured mesh vertices are not yet transformed
- DONE Start a mesh object and put multiple material
  - see how you can handle it in the renderer
    - renderer_mesh_wireframe.py
    - renderer_mesh_basic.py
    - renderer_mesh_normal.py
    - renderer_mesh_texture.py
  - in those case the Material is the one handling the matplotlib rendering
  - Mesh(geometry, MeshWireframeMaterial) -> Lines (geometry is not the same, duplication of vertices)
  - Mesh(geometry, MeshBasicMaterial) -> Polygons
  - Mesh(geometry, MeshNormalMaterial) -> Polygons
  - Mesh(geometry, MeshPhongMaterial) -> 
- DONE make a scene class
- DONE do a backface culling for polygons
  - front, back, both
  - in `Constants`
- DONE should i make a `MeshGeometry` class which inherit from `Geometry` ?
  - `GeometryShape` is only producing `MeshGeometry` it should be made obvious
  - `Geometry` Would store only the vertices. no face, no uv, no normals
  - `Lines` and `Points` and `Polygons` are using geometry
  - `MeshGeometry`
- DONE apply transform to transform mesh
  - in `GeometryUtils.apply_transform(geometry, matrix4)`
- FIXED bug in transform
  - how to fix it ? divide and conquer
  - find a test and ask AI to fix it
  - first orthoraphic camera, then perspective camera
  - first handle the object3d transform. local_transform, world_transform
    - how to test that ?
    - for translation, rotation, scale
  - once object3d transform is fixed, then do the camera transform 
- DONE transform fixed ? it seems so
  - clean it
- DONE add more geometry shapes in `GeometryMeshShape`
  - box DONE
  - sphere
  - plane DONE
  - cylinder
  - grid - very useful for reference
- DONE move the .lines_from_obj in Lines class method
  - `Lines.from_mesh_geometry(geometry)`
  - same for points
- DONE issue in object3d transform
  - just to a rotation around Z and it fails
- DONE animation loop decorator..
  - to avoid the weird `animation_loop.add_callback(lines_update)` all the time
- DONE animation loop remove the timestamp absolute
  - it look weird, cant find a good name
- DONE camera controller for awsd - advice for smoothness
  - must have a function in animation loop, else you do repeat from keyboard
  - you get a angular speed in seconds, position speed in seconds.
  - you read keyboard and maintain a {lateral: [-1,0,+1], vertical: [-1,0,+1], depth: [-1,0,+1], rotation_y: [-1,0,+1]}
  - in animation function, you use this and the world_matrix to update the camera 
- DONE modify the obj loader to use Geometry
  - to support 'non-meshio' obj files
- DONE implement the test layer from gsp_sc
  - require not to be interactive when i run the examples
  - require to save the matplotlib output
  - step 1: run all example in non interactive mode to check if there is exception
  - step 2: save the matplotlib output and compare it to a reference image
  - TODO ExamplesUtils.preamble() to set random seed if MPLSG_TESTING
  - TODO in animation loop, detect MPLSG_TESTING
    - if present, dont run the loop
    - save the output in a file, based on the example name
- DONE make a wireframe example with `Lines`
- DONE port `Geometry` everywhere in all `object3ds`
- DONE load a textured plane
  - for 3d oriented images
- DONE rename `RendererMatplotlib` to `Renderer`
- DONE make the texture example work again
- DONE move ./helpers in ./examples/common
- DONE make a sprite class
- DONE do the event in renderering
  - src/gsp/core/visual_base.py
  - allow to change the color based on depth
  - simulate a fog for various effect
  - do an example of protein with fog
  - it would help 
- DONE import suzanne model in .obj
- DONE Code various camera controller
  - first do you awsd camera
  - how to handle input events in matplotlib
  - awsd camera 
  - orbit camera
  - first person camera
- DONE remove ./matplotlib in ./renderer
  - there is only one renderer 
- DONE move it in iits own folder - matplotlib_sc for now ?
  - find a good name for it
